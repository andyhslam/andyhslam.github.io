# 前端编码规范

## 性能考虑：
1. 首页待办翻页问题
2. 更改跳转方式，同标签内打开
3. 主要接口优先调用，次要接口晚加载或者用户操作触发
4. 我的工单，工单管理，界面设计太耦合，可以分层设计，手动触发接口调用 
5. 减少图标的使用，现在图标库有550多个图标，纯文字按钮也很漂亮的。能用css不用图标
6. 减少dom，多使用before、after伪类代替标签
7. 组件拆分，尽量摊平，层次越少越好
8. 组件拆分引入，逐步替换smartUI
9. 删减组件内部无用样式，还有系统全局样式，以前为了保持系统风格，workspaceUI搞了大量不合理的全局样式
10. 任何涉及轮训、websocket的需求，都上报祥总，他同意了，再做
11. 后端收敛返回字段，例如：下拉框尽量使用专用接口，大部分时候一个对象里面只需要code和name
12. 去重这种工作，由后端完成，只要后端做好校验，一般也不会出现重复问题。数据库本身就是专业的数据处理工具，解决这种问题，是专业的，比前端性能强太多。

## 编码规范：
1. 每个表格列写注释说明是什么，i18n有时候看不出来，也不方便搜索
2. 表单校验
3. 组件尽量高内聚、低耦合
4. 频繁来回切换的组件，使用v-show
5. window、dom的事件监听一定要在beforeDestroy清除
6. 组件要写name
7. 单独的dialog组件，不要在mounted等生命周期钩子获取接口数据，应该在@open事件，避免dialog未打开却调用了接口
8. 报错输出使用console.error，不要使用log，log在打包的时候会被webpack删除
9. 尽量别用$parent、$root
10. No side effect 有时候非常利于debug
11. 如果要在template里面转换数据，且用不到this的话，更推荐使用过滤器而不是函数，因为过滤器里面不能有this，看起来就无副作用
12. 字符串参数trim()
13. 组件名大驼峰，路由名烤肉串，组件不一定放在文件里，后续如果里面逻辑增多就要放到文件夹里面了，路由要放在文件夹里，并且使用index.vue作为路由对应组件
14. 不要使用魔法数字，枚举 > 魔法字符串 > 魔法数字
15. 变量命名要形象具体
16. created开启的timeout、interval，记得在beforeDestroy清除掉，最好使用$once()
17. 尽量不用mixins，如果非要用，要有namespace！！！
18. 引用可追溯，就近原则
19. 局部vuex数据记得及时清除，防止内存泄露
20. 比起在模板层面管理相关逻辑，更好的办法是通过创建计算属性筛选出列表，并以此创建可见元素。

## 遇到的坑：
1. 按筛选组件输入框按回车刷新页面的问题找到了，是因为el-form下面如果只有一个输入框时会触发form标签的submit事件，解决方法是在el-form上加上@submit.native.prevent，以后如果有类似el-form里只放一个输入框的场景要注意下
2. 小心引用类型导致的关联变动，比如将table的row传递给form，如果form的数据改变，将关联改变table的row
3. 异步引入组件可以解决组件嵌套依赖循环问题...
